<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birthday Heart & Memories</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #fff0f6;
    font-family: 'Segoe UI', sans-serif;
    overflow: hidden;
    flex-direction: column;
  }

  /* ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÉ‡∏´‡∏ç‡πà */
  #heartWrapper {
    width: 200px;
    height: 200px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    z-index: 10;
  }

  #heartWrapper svg {
    width: 100%;
    height: 100%;
    animation: pulse 1s infinite alternate;
  }

  @keyframes pulse {
    from { transform: scale(1); }
    to { transform: scale(1.2); }
  }

  /* ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© A4 */
  #paper {
    width: 280px;
    height: 360px;
    background: #fffaf0;
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.25);
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    transition: transform 0.5s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 15px;
    z-index: 50;
    overflow: hidden;
    touch-action: pan-y;
    perspective: 1000px; /* ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 3D flip */
  }

  #paper.show {
    transform: translate(-50%, -50%) scale(1);
  }

  /* Carousel ‡∏†‡∏≤‡∏û */
  #carousel {
    width: 100%;
    flex: 1;
    display: flex;
    transition: transform 0.3s ease;
    transform-style: preserve-3d;
  }

  .card {
    width: 100%;
    height: 100%;
    border-radius: 15px;
    flex-shrink: 0;
    background-size: cover;
    background-position: center;
    cursor: pointer;
    backface-visibility: hidden;
    transform-style: preserve-3d;
  }

  .card.flipped {
    transform: rotateY(180deg);
  }

  .card .back {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    background: #fff0f6;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Great Vibes', cursive;
    font-size: 20px;
    color: #ff4d94;
    border-radius: 15px;
    backface-visibility: hidden;
    transform: rotateY(180deg);
  }

  #messageText {
    margin-top: 10px;
    text-align: center;
    font-family: 'Great Vibes', cursive;
    font-size: 18px;
    color: #ff4d94;
  }
</style>
</head>
<body>

<!-- ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÉ‡∏´‡∏ç‡πà -->
<div id="heartWrapper">
  <svg viewBox="0 0 32 29.6">
    <path d="M23.6,0c-2.7,0-5.1,1.6-6.6,3.9C15.5,1.6,13.1,0,10.4,0C4.7,0,0,4.7,0,10.4
      c0,6.3,6.3,11.4,15.8,19.2L16,29.6l0.2-0.1C25.7,21.8,32,16.7,32,10.4C32,4.7,27.3,0,23.6,0z"/>
  </svg>
</div>

<!-- ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© A4 -->
<div id="paper">
  <div id="carousel">
    <div class="card" style="background-image: url('memory1.jpg');">
      <div class="back">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥ 1 üíñ</div>
    </div>
    <div class="card" style="background-image: url('memory2.jpg');">
      <div class="back">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥ 2 üíñ</div>
    </div>
    <div class="card" style="background-image: url('memory3.jpg');">
      <div class="back">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥ 3 üíñ</div>
    </div>
  </div>
  <p id="messageText">‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏ô‡∏∞ üíå ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏î‡∏π‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥</p>
</div>

<!-- ‡πÄ‡∏û‡∏•‡∏á -->
<audio id="bgMusic">
  <source src="https://github.com/660710112/surprise/raw/main/Boyd%20Kosiyabong%20-%20‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏¢%20ft.%20Seattha%20Sirachaya%20(Official%20Lyric%20Video)(mp3j.cc).mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

<script>
const heartWrapper = document.getElementById("heartWrapper");
const paper = document.getElementById("paper");
const music = document.getElementById("bgMusic");
const hookStart = 69;
const hookEnd = 150;
const carousel = document.getElementById("carousel");
const cards = carousel.querySelectorAll(".card");
const messageText = document.getElementById("messageText");

let startX = 0;
let currentTranslate = 0;
let currentIndex = 0;

// ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏´‡∏±‡∏ß‡πÉ‡∏à ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© + ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á
heartWrapper.addEventListener("click", () => {
  paper.classList.add("show");
  music.currentTime = hookStart;
  music.play().catch(()=>{});
});

// ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏•‡∏á‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏µ‡πà hookEnd
music.addEventListener('timeupdate', () => {
  if(music.currentTime >= hookEnd){
    music.pause();
  }
});

// Touch event ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö swipe
carousel.addEventListener("touchstart", e => { startX = e.touches[0].clientX; });

carousel.addEventListener("touchmove", e => {
  const dx = e.touches[0].clientX - startX;
  carousel.style.transform = `translateX(${currentTranslate + dx}px)`;
});

carousel.addEventListener("touchend", e => {
  const dx = e.changedTouches[0].clientX - startX;
  if (dx < -50 && currentIndex < cards.length - 1) currentIndex++;
  else if (dx > 50 && currentIndex > 0) currentIndex--;
  currentTranslate = -currentIndex * paper.clientWidth;
  carousel.style.transform = `translateX(${currentTranslate}px)`;
  messageText.textContent = `‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥ ${currentIndex + 1} üíå`;
});

// ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏û‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î
cards.forEach(card => {
  card.addEventListener("click", () => {
    card.classList.toggle("flipped");
  });
});
</script>

</body>
</html>
